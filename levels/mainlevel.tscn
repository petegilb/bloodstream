[gd_scene load_steps=15 format=3 uid="uid://d3xnc4rwvnm06"]

[ext_resource type="PackedScene" uid="uid://bp5fbwdjy14n" path="res://prefabs/blood_river.tscn" id="1_cxcq7"]
[ext_resource type="Script" uid="uid://cyut0su3xehb5" path="res://scripts/spline_multimesh.gd" id="1_mlnnp"]
[ext_resource type="Script" uid="uid://cyf52vdh2xqnk" path="res://scripts/main.gd" id="1_natwr"]
[ext_resource type="ArrayMesh" uid="uid://8xgtipjvq2hl" path="res://models/heart_atrium_HeartAtrium1.res" id="2_5ng5q"]
[ext_resource type="PackedScene" uid="uid://dodflpxwoog8b" path="res://prefabs/boat_character.tscn" id="2_cxcq7"]
[ext_resource type="Material" uid="uid://buv0thsvwaod4" path="res://material/blood_water.tres" id="3_6wtob"]
[ext_resource type="ArrayMesh" uid="uid://d3es4r2knt7hc" path="res://models/tubepath_TubePath.res" id="3_lh2t4"]
[ext_resource type="Material" uid="uid://bnipdk3s5xj7w" path="res://material/tube_wall.tres" id="3_lrn0d"]
[ext_resource type="PackedScene" uid="uid://4pn1n18e51hx" path="res://prefabs/csg_tube.tscn" id="3_p5hok"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_cxcq7"]
sky_top_color = Color(0.989204, 0.696157, 0.689012, 1)
sky_horizon_color = Color(0.74, 0.296, 0.3182, 1)
ground_bottom_color = Color(0.331113, 0.0590892, 0.0392149, 1)
ground_horizon_color = Color(0.381562, 0.139504, 0.0772037, 1)
energy_multiplier = 0.8

[sub_resource type="Sky" id="Sky_mlnnp"]
sky_material = SubResource("ProceduralSkyMaterial_cxcq7")

[sub_resource type="Environment" id="Environment_lh2t4"]
background_mode = 2
background_energy_multiplier = 2.58
sky = SubResource("Sky_mlnnp")
fog_enabled = true
fog_light_color = Color(0.38, 0.130213, 0.1216, 1)
fog_sky_affect = 0.57

[sub_resource type="Curve3D" id="Curve3D_a8rn8"]
_data = {
"points": PackedVector3Array(29.3757, -33.4626, -53.4267, -29.3757, 33.4626, 53.4267, 29.7511, -28.6569, -47.7252, 12.4839, 5.52884, -29.4481, -12.4839, -5.52884, 29.4481, -18.7794, 1.75526, 80.3833, 15.1798, -5.33301, -21.1314, -15.1798, 5.33301, 21.1314, -113.339, -3.58766, 210.61, 13.3098, -12.2579, -48.9322, -13.3098, 12.2579, 48.9322, -115.333, -3.80044, 368.977, 0, 0, 0, 0, 0, 0, -69.8398, -11.2675, 497.785),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="MultiMesh" id="MultiMesh_cxcq7"]
transform_format = 1
instance_count = 46
mesh = ExtResource("3_lh2t4")
buffer = PackedFloat32Array(-0.87965, 0.342837, 0.329883, 17.8096, 0.01972, 0.718818, -0.694462, -19.0124, -0.475213, -0.604784, -0.639453, -16.9462, -0.897247, 0.289236, 0.33379, 13.6434, 0.0532591, 0.820942, -0.567986, -11.0753, -0.438304, -0.492337, -0.752314, -8.20583, -0.912943, 0.237774, 0.3318, 9.46678, 0.0769055, 0.898401, -0.431863, -4.80009, -0.400775, -0.36924, -0.838691, 1.7923, -0.925439, 0.19222, 0.326615, 5.33847, 0.0908784, 0.949213, -0.300743, -0.213329, -0.367836, -0.249092, -0.896034, 12.6907, -0.934336, 0.153768, 0.321582, 1.27736, 0.0975927, 0.978041, -0.18373, 2.8117, -0.342772, -0.14068, -0.928885, 24.1489, -0.939779, 0.121763, 0.319403, -2.73596, 0.0999268, 0.991446, -0.0835843, 4.47457, -0.326849, -0.0469877, -0.943925, 35.9013, -0.941892, 0.0948109, 0.322288, -6.75127, 0.100266, 0.994961, 0.000638978, 4.98323, -0.320603, 0.0326241, -0.946641, 47.7609, -0.940347, 0.0714297, 0.332653, -10.8461, 0.100513, 0.992396, 0.071312, 4.52297, -0.325029, 0.100237, -0.940349, 59.5965, -0.933802, 0.0502249, 0.354258, -15.1356, 0.102536, 0.986136, 0.130668, 3.24911, -0.342784, 0.158157, -0.925973, 71.3032, -0.904185, 0.0389739, 0.425352, -19.8495, 0.114531, 0.981484, 0.15335, 1.32936, -0.4115, 0.187535, -0.891941, 82.7546, -0.855099, 0.0532567, 0.515718, -25.8458, 0.128349, 0.985493, 0.110961, -0.28942, -0.502327, 0.161145, -0.849543, 93.6358, -0.830503, 0.0615583, 0.5536, -32.5713, 0.132973, 0.98705, 0.0896938, -1.53726, -0.540909, 0.148134, -0.827939, 104.139, -0.81529, 0.0677558, 0.57507, -39.6549, 0.135201, 0.987955, 0.0751997, -2.56717, -0.563048, 0.139121, -0.814641, 114.428, -0.804579, 0.0730875, 0.589328, -46.9584, 0.136483, 0.98859, 0.0636798, -3.43636, -0.57795, 0.131709, -0.80538, 124.578, -0.796581, 0.0781393, 0.599459, -54.412, 0.137273, 0.989088, 0.0534666, -4.17028, -0.58874, 0.124896, -0.798618, 134.63, -0.790474, 0.083299, 0.606801, -61.9743, 0.137767, 0.989503, 0.043582, -4.77903, -0.596801, 0.118088, -0.793658, 144.608, -0.785504, 0.0889234, 0.612431, -69.6174, 0.138083, 0.989858, 0.0333463, -5.26251, -0.603255, 0.110787, -0.78982, 154.531, -0.781619, 0.0954565, 0.616405, -77.32, 0.138259, 0.990152, 0.0219456, -5.61133, -0.60824, 0.102406, -0.787124, 164.414, -0.778599, 0.103595, 0.618906, -85.0635, 0.138335, 0.990351, 0.00820374, -5.80422, -0.612084, 0.0920494, -0.785423, 174.269, -0.776519, 0.114672, 0.619561, -92.8277, 0.138336, 0.990336, -0.00999892, -5.80031, -0.61472, 0.0780097, -0.784885, 184.11, -0.775833, 0.131892, 0.616976, -100.583, 0.13832, 0.989673, -0.037803, -5.51701, -0.61559, 0.0561493, -0.786074, 193.953, -0.77803, 0.166393, 0.605729, -108.265, 0.138584, 0.98599, -0.0932051, -4.74949, -0.612751, 0.0117233, -0.790193, 203.827, -0.900831, 0.206465, 0.382053, -115.223, 0.177804, 0.977977, -0.108751, -2.98014, -0.396092, -0.0305538, -0.917719, 214.052, -0.97808, 0.18924, 0.0869012, -117.83, 0.191804, 0.981184, 0.0222284, -2.60224, -0.0810596, 0.0382897, -0.995969, 226.249, -0.981874, 0.188501, -0.0197637, -118.161, 0.186932, 0.980336, 0.0632877, -3.17978, 0.0313049, 0.0583761, -0.9978, 238.76, -0.979651, 0.188704, -0.0683747, -117.574, 0.183352, 0.97998, 0.0775892, -4.07899, 0.0816472, 0.0634813, -0.994638, 251.247, -0.97784, 0.188543, -0.0910099, -116.557, 0.181547, 0.980129, 0.0798768, -5.07512, 0.104262, 0.061627, -0.992641, 263.701, -0.977241, 0.187927, -0.0984095, -115.358, 0.181048, 0.980627, 0.0747654, -6.05126, 0.110553, 0.0552683, -0.992333, 276.141, -0.977748, 0.18693, -0.095221, -114.134, 0.181402, 0.981337, 0.0637668, -6.9259, 0.105364, 0.0451176, -0.993412, 288.585, -0.979149, 0.185668, -0.0824487, -113.009, 0.182268, 0.982121, 0.0470019, -7.62731, 0.0897014, 0.0310765, -0.995486, 301.049, -0.981035, 0.18433, -0.0599666, -112.105, 0.183199, 0.982786, 0.023794, -8.07979, 0.0633202, 0.0124563, -0.997917, 313.543, -0.982729, 0.183269, -0.0256475, -111.553, 0.183513, 0.982989, -0.0076141, -8.1926, 0.0238158, -0.0120745, -0.999642, 326.064, -0.982779, 0.183223, 0.0239691, -111.52, 0.181868, 0.982053, -0.0500565, -7.84687, -0.0327105, -0.0447268, -0.998459, 338.592, -0.978036, 0.185828, 0.0943721, -112.231, 0.175509, 0.978546, -0.108124, -6.87774, -0.11244, -0.0889649, -0.989648, 351.065, -0.961294, 0.194779, 0.194817, -114.003, 0.158349, 0.969364, -0.188052, -5.05191, -0.225477, -0.149646, -0.962644, 363.33, -0.970294, 0.196638, 0.140994, -116.637, 0.169668, 0.968365, -0.18271, -2.42254, -0.172461, -0.153635, -0.973005, 375.292, -0.980269, 0.19393, -0.0382231, -117.238, 0.196799, 0.975634, -0.0968584, -0.686487, 0.018508, -0.102617, -0.994564, 387.67, -0.965578, 0.197849, -0.168819, -115.9, 0.205884, 0.978076, -0.031094, 0.098725, 0.158965, -0.0649901, -0.985157, 400.098, -0.942805, 0.203905, -0.263688, -113.161, 0.206585, 0.978266, 0.0179257, 0.169081, 0.261612, -0.0376597, -0.964441, 412.323, -0.918947, 0.210264, -0.333639, -109.401, 0.203664, 0.977491, 0.055143, -0.297034, 0.337723, -0.0173457, -0.941087, 424.268, -0.896442, 0.216314, -0.386758, -104.874, 0.199315, 0.976322, 0.0841801, -1.17573, 0.39581, -0.00172388, -0.918331, 435.921, -0.875358, 0.221913, -0.429531, -99.7484, 0.194363, 0.975007, 0.107662, -2.38201, 0.442687, 0.0107262, -0.896612, 447.295, -0.855954, 0.227098, -0.464498, -94.1396, 0.189264, 0.973645, 0.127308, -3.8572, 0.481167, 0.0210107, -0.876376, 458.406, -0.837648, 0.231984, -0.49449, -88.1256, 0.184081, 0.972262, 0.144336, -5.56115, 0.514257, 0.0298419, -0.857116, 469.271, -0.819804, 0.236765, -0.521402, -81.7563, 0.17874, 0.970831, 0.159829, -7.46812, 0.544035, 0.0378191, -0.838209, 479.896, -0.80065, 0.241899, -0.548118, -75.0534, 0.172738, 0.969222, 0.175459, -9.56806, 0.573691, 0.0457651, -0.81779, 490.278)

[node name="Mainlevel" type="Node3D"]
script = ExtResource("1_natwr")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_lh2t4")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
light_energy = 0.0
shadow_enabled = true
sky_mode = 2

[node name="Organs" type="Node3D" parent="."]

[node name="Brain" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.33704, 0, 566.246)
inner_radius = 42.0658
outer_radius = 121.061

[node name="Heart" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.33704, -41.3247, 8.81529)
visible = false
inner_radius = 42.0658
outer_radius = 121.061

[node name="LeftLung" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 478.495, 0, 8.81529)
inner_radius = 42.0658
outer_radius = 121.061

[node name="RightLung" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -498.109, 0, 8.81529)
inner_radius = 42.0658
outer_radius = 121.061

[node name="Liver" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 211.456, 0, -367.414)
inner_radius = 27.8221
outer_radius = 86.876

[node name="Stomach" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -94.1033, 0, -508.006)
inner_radius = 27.8221
outer_radius = 86.876

[node name="Spleen" type="CSGTorus3D" parent="Organs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -293.862, 0, -682.64)
inner_radius = 27.8221
outer_radius = 86.876

[node name="HeartAtrium1" type="MeshInstance3D" parent="Organs"]
transform = Transform3D(-0.994776, 0, -0.102081, 0, 1, 0, 0.102081, 0, -0.994776, 32.381, -31.6244, -68.4578)
material_override = ExtResource("3_lrn0d")
mesh = ExtResource("2_5ng5q")

[node name="Water" type="CSGPolygon3D" parent="Organs/HeartAtrium1"]
transform = Transform3D(0.995307, 0.0957845, -0.0137841, 0.0131686, 0.00705517, 0.999888, 0.0958711, -0.995377, 0.00576072, 0, 3.27234, 0)
use_collision = true
collision_layer = 2
collision_mask = 0
polygon = PackedVector2Array(-44.7469, 73.1568, -6.51045, 86.3531, 25.6215, 84.1339, 60.0218, 64.1741, 88.3775, 13.6509, 93.8802, -35.0973, 95, -55, 55.9165, -101.955, 23.8394, -107.561, -22.3734, -94.4603, -64.0874, -57.1284, -84.0666, -20.0833, -79.9186, 22.4199, -66.9747, 52.4036)
smooth_faces = true
material = ExtResource("3_6wtob")

[node name="BloodStreams" type="Node3D" parent="."]

[node name="River" type="Path3D" parent="BloodStreams"]
curve = SubResource("Curve3D_a8rn8")
script = ExtResource("1_mlnnp")
distance_between_mesh = 12.535

[node name="Bloodstream" parent="BloodStreams/River" instance=ExtResource("1_cxcq7")]

[node name="CSGTube2" parent="BloodStreams/River" instance=ExtResource("3_p5hok")]

[node name="MultiMeshInstance3D" type="MultiMeshInstance3D" parent="BloodStreams/River"]
visible = false
multimesh = SubResource("MultiMesh_cxcq7")

[node name="BoatCharacter" parent="." instance=ExtResource("2_cxcq7")]
transform = Transform3D(0.909374, 0, -0.415979, 0, 1, 0, 0.415979, 0, 0.909374, 0.676237, -20.0393, -54.0503)
